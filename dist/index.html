<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>

  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <link rel="stylesheet" href="./style.css">
  <style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    list-style-type: none;
  }
  main {
    padding: 16px;
  }

  /*2018/09/25*/
  section #js-letterList {
      margin-top: 83px;
  }

  .slick-slide .ll-tab__item{
      background-repeat:  no-repeat;
      background-size: 100%;
      background-position:  center;
      height: 66px;
      width: 100%;
      border: 0;
      color:#fff;
  }
  .slick-slide[data-slick-index="0"] .ll-tab__item {
      background-image: url("/image/tab/tab_short.sp.480.png");
  }
  .slick-slide[data-slick-index="1"] .ll-tab__item {
      background-image: url("/image/tab/tab_long.sp.480.png");
  }
  .slick-slide[data-slick-index="2"] .ll-tab__item {
      background-image: url("/image/tab/tab_year.sp.480.png");
  }
  .slick-slide[data-slick-index="3"] .ll-tab__item {
      background-image: url("/image/tab/tab_pro.sp.480.png");
  }

  .slick-slide.slick-active {
      outline: 0;
  }

  @media (max-width:320px){
    .ll-tab .slick-slide{
        width: 82px !important;
    }
  }

  .ll-content__title {
      border:  1px solid #fff;
      border-left: 0;
      border-right: 0;
      font-size: 18px;
      padding-bottom:  16px;
  }

</style>

</head>
<body>
<main>

<section>
  <div id="js-letterList" class="ll-body">
    <div class="ll-tab">
      <div><div class="ll-tab__item">ショート<br>サイクル</div></div>
      <div><div class="ll-tab__item">ロング<br>サイクル</div></div>
      <div><div class="ll-tab__item">年間</div></div>
      <div><div class="ll-tab__item">プログ<br>レス</div></div>
    </div>
    <div class="ll-content">
      <div v-for="( loop, index ) in 4" :class="llContentArea(index)">
        <div class="ll-content__area">
          <div class="ll-content__title" v-html="llContentTitle(index)"></div>
          <ul>
            <li class="ll-content__item" v-for="( item, key ) in list" v-if="key < 6">
              <a :href="item.page">
                <div class="ll-content__date">
                  <span>{{ item.period }}</span>
                </div>
                <div class="ll-content__text">
                  <span>{{ item.menu_name }}</span>
                </div>
                <div class="ll-content__planetNote" :class="item.image_pickup">
                  <span></span>
                </div>
                <div class="ll-content__listUpdate" v-if="item.midoku == 0">
                  <span><img src="http://mei.cocoloni.jp/image/icon/stamp_new.sp.480.png" alt="" /></span>
                </div>
              </a>
            </li>
            <li class="ll-content__item" v-for="( item, key ) in list" v-else-if="item.image == index">
              <a :href="item.page">
                <div class="ll-content__date">
                  <span>{{ item.period }}</span>
                </div>
                <div class="ll-content__text">
                  <span>{{ item.menu_name }}</span>
                </div>
                <div class="ll-content__planetNote" :class="item.image_pickup">
                  <span></span>
                </div>
                <div class="ll-content__listUpdate" v-if="item.midoku == 0">
                  <span><img src="http://mei.cocoloni.jp/image/icon/stamp_new.sp.480.png" alt="" /></span>
                </div>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<pre>
[%FOREACH p=pickup%]
{
  "image": "[%p.image%]",
  "menu_name": "[% p.menu_name %]",
  "period": "[% p.period %]",
  "kidoku": "[% p.is_midoku %]",
  "new": "[% p.is_midoku %]",
  "page": "t.cgi?t=[%p.page%]&menu_id=[%p.menu_id%]&<!--DEF_P-->",
  "menu_id": "[%p.menu_id%]",
  "image_pickup": "[%p.image_pickup%]",
},
[%END%]
</pre>

</main>

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.0.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script>

new Vue({
  el: '#js-letterList',
  data: {
    list: [
      {
        "image": "3",
        "menu_name": "今年起こりうる試練",
        "period": "12/20-3/21",
        "midoku": "1",
        "page": "t.cgi?t=m/fortune/result&menu_id=309&zspid=wzappallas",
        "menu_id": "309",
        "image_pickup": "planet_08",
      },

      {
        "image": "1",
        "menu_name": "今日の月が教えてくれる最適な過ごし方",
        "period": "9/21-9/23",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=313&zspid=wzappallas",
        "menu_id": "313",
        "image_pickup": "planet_03",
      },

      {
        "image": "1",
        "menu_name": "今日の月が教えてくれる全体的なムード",
        "period": "9/20-9/21",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=315&zspid=wzappallas",
        "menu_id": "315",
        "image_pickup": "planet_03",
      },

      {
        "image": "4",
        "menu_name": "ここ半年以上、不調続き。どう過ごせば改善できる？",
        "period": "",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune2/result&menu_id=402&zspid=wzappallas",
        "menu_id": "402",
        "image_pickup": "planet_03",
      },

      {
        "image": "4",
        "menu_name": "大きく変わってしまったあの人。今のあの人の心境は？",
        "period": "",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune2/result&menu_id=403&zspid=wzappallas",
        "menu_id": "403",
        "image_pickup": "planet_03",
      },

      {
        "image": "1",
        "menu_name": "今月の対人運は？",
        "period": "9/14-10/2",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=304&zspid=wzappallas",
        "menu_id": "304",
        "image_pickup": "planet_04",
      },

      {
        "image": "1",
        "menu_name": "今月色々とスランプ気味。今は何をするといい？",
        "period": "9/7-10/11",
        "midoku": "1",
        "page": "t.cgi?t=m/fortune/result&menu_id=311&zspid=wzappallas",
        "menu_id": "311",
        "image_pickup": "planet_02",
      },

      {
        "image": "1",
        "menu_name": "今月のあなたの運勢とテーマ",
        "period": "9/7-10/11",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=301&zspid=wzappallas",
        "menu_id": "301",
        "image_pickup": "planet_02",
      },

      {
        "image": "1",
        "menu_name": "仕事では何をするのに適したとき？",
        "period": "9/7-10/11",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=303&zspid=wzappallas",
        "menu_id": "303",
        "image_pickup": "planet_02",
      },

      {
        "image": "4",
        "menu_name": "今期のあなたの心理と大切な裏テーマ",
        "period": "",
        "midoku": "1",
        "page": "t.cgi?t=m/fortune2/result&menu_id=401&zspid=wzappallas",
        "menu_id": "401",
        "image_pickup": "planet_03",
      },

      {
        "image": "2",
        "menu_name": "恋愛では何をするのに適したとき？",
        "period": "8/27-1/4",
        "midoku": "1",
        "page": "t.cgi?t=m/fortune/result&menu_id=302&zspid=wzappallas",
        "menu_id": "302",
        "image_pickup": "planet_05",
      },

      {
        "image": "2",
        "menu_name": "今月起こりそうな嬉しいことは？",
        "period": "8/27-1/4",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=305&zspid=wzappallas",
        "menu_id": "305",
        "image_pickup": "planet_05",
      },

      {
        "image": "2",
        "menu_name": "今月は何を気をつけたらいい？",
        "period": "5/3-10/23",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=306&zspid=wzappallas",
        "menu_id": "306",
        "image_pickup": "planet_06",
      },

      {
        "image": "3",
        "menu_name": "今年訪れやすいチャンスや幸運",
        "period": "10/10-11/7",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=307&zspid=wzappallas",
        "menu_id": "307",
        "image_pickup": "planet_07",
      },

      {
        "image": "3",
        "menu_name": "今年幸運を掴むためにすべきこと",
        "period": "8/15-10/26",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=308&zspid=wzappallas",
        "menu_id": "308",
        "image_pickup": "planet_07",
      },

      {
        "image": "3",
        "menu_name": "今年試練を克服するためにすべきこと",
        "period": "7/31-10/12",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=310&zspid=wzappallas",
        "menu_id": "310",
        "image_pickup": "planet_08",
      },

      {
        "image": "2",
        "menu_name": "急に感じが悪くなったあの人。その理由は？",
        "period": "5/3-10/23",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=312&zspid=wzappallas",
        "menu_id": "312",
        "image_pickup": "planet_06",
      },

      {
        "image": "2",
        "menu_name": "最近イライラ続き。一体何が原因？",
        "period": "5/3-10/23",
        "midoku": "0",
        "page": "t.cgi?t=m/fortune/result&menu_id=314&zspid=wzappallas",
        "menu_id": "314",
        "image_pickup": "planet_06",
      },
    ],
  },
  methods: {
    llContentArea: function(index) {
      if( index == 0 ) {
        return "bg-short";
      } else if( index == 1 ) {
        return "bg-long";
      } else if( index == 2 ) {
        return "bg-year";
      } else {
        return "bg-prog";
      }
    },
    llContentTitle: function(index) {
      if( index == 0 ) {
        return "ショートサイクル<br><span>～数日間から一ヶ月～</span>";
      } else if( index == 1 ) {
        return "ロングサイクル";
      } else if( index == 2 ) {
        return "年間";
      } else {
        return "プログレス";
      }
    },
  },
});

$('#js-letterList .ll-content').slick({
  slidesToShow: 1,
  slidesToScroll: 1,
  arrows: false,
  fade: true,
  swipe: false,
  adaptiveHeight: true,
  asNavFor: '#js-letterList .ll-tab'
});
$('#js-letterList .ll-tab').slick({
  slidesToShow: 4,
  // slidesToScroll: 1,
  asNavFor: '#js-letterList .ll-content',
  dots: false,
  centerMode: false,
  focusOnSelect: true
});

$(function() {
  $('.ll-content__item').on('click', function() {
    localStorage.setItem("listId_name", JSON.stringify(this.listId_name));
  })
});


</script>
</body>
</html>
